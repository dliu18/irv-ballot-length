# Code for Ballot Length in Instant Runoff Voting
This repository accompanies the paper 

> Ballot Length in Instant Runoff Voting. <br> Kiran Tomlinson, Johan Ugander, and Jon Kleinberg. 2022.

We have included all of the PrefLib data files we used, all code for running experiments, all code for generating plots,
and the results files generated by our experiment runs.

## Contents
- `data/`: all the PrefLib data we used
- `plots/`: all plots in the paper, plus some more
- `results/`: all results files from our experiment runs, some of them compressed
- `config.yml`: customizable paths to `data/` and `results/`
- `irv.py`: code for running IRV
- `lp.py`: code for generating and displaying LP full-ballot constructions
- `plot.py`: code for generating all plots
- `real_data.py`: code for analyzing PrefLib elections
- `truncation.py`: code for running truncation simulations on synthetic data

## Libraries
Tested with:
- Python 3.9.12
  - numpy 1.20.1
  - matplotlib 3.5.1
  - scipy 1.6.1
  - tqdm 4.58.0
  - pyyaml 5.4.1

## Reproducibility
First, uncompress the results files:

    gunzip results/*.gz 

Create plots from our results files and print additional data/result details:

    python3 plot.py

View the LP ballot constructions:
    
    python3 lp.py

Rerun the LP ballot constructions:
    
    python3 lp.py --make-constructions

Rerun the synthetic data experiments--use as many threads as you have cores for best performance:

    python3 truncation.py --threads [THREADS]

Rerun the PrefLib resampling experiments:

    python3 real_data.py --threads [THREADS]

## Uniform 1-Euclidean visualization tool
To visualize IRV in in 1-dimension with uniform 1-Euclidean voters, try running

    python3 irv.py 5

This launches an interactive plot showing the regions of the unit interval where voters rank each candidate at each 
position. In the title, you can also see the winners at each truncation length. Try moving the candidates around
to change the winners at different ballot lengths. You can also specify other candidate counts up to 8 in the command.